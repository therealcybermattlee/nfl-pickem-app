# Picks API Contracts

**Base URL**: `/api/picks`
**Authentication**: Required (Bearer token)

## GET /api/picks

Get all picks for the authenticated user.

**Headers**:
```
Authorization: Bearer <token>
```

**Query Parameters**:
- `week` (optional): Filter by week
- `season` (optional): Filter by season

**Response** (200 OK):
```json
{
  "picks": [
    {
      "id": "pick-001",
      "userId": "user-001",
      "gameId": "game-001",
      "teamId": "team-phi-uuid",
      "isLocked": true,
      "lockedAt": "2025-09-05T20:00:00Z",
      "autoGenerated": false,
      "points": 1,
      "isCorrect": true
    }
  ]
}
```

**Errors**:
- 401: Missing or invalid token
- 500: Server error

---

## POST /api/picks

Submit or update a pick for a game.

**Headers**:
```
Authorization: Bearer <token>
```

**Request Body**:
```json
{
  "userId": "user-001",
  "gameId": "game-001",
  "teamId": "team-phi-uuid"
}
```

**Response** (200 OK):
```json
{
  "success": true,
  "pick": {
    "id": "pick-001",
    "userId": "user-001",
    "gameId": "game-001",
    "teamId": "team-phi-uuid",
    "isLocked": false,
    "autoGenerated": false,
    "createdAt": "2025-09-04T15:30:00Z"
  },
  "timeUntilLock": 32400000
}
```

**Errors**:
- 400: Game already locked, invalid teamId
- 401: Missing or invalid token
- 500: Server error

---

## POST /api/picks/auto-generate

Generate random picks for users who missed deadline (cron job).

**Headers**:
```
X-API-Key: ESPN-SYSTEM-SYNC-2025
```

**Response** (200 OK):
```json
{
  "success": true,
  "autoGeneratedCount": 8,
  "gamesProcessed": 16,
  "details": [
    {
      "userId": "user-002",
      "gameId": "game-003",
      "teamId": "team-kc-uuid"
    }
  ]
}
```

---

## GET /api/picks/live-status

Get real-time pick status for active games.

**Headers**:
```
Authorization: Bearer <token>
```

**Query Parameters**:
- `userId` (required): User ID
- `week` (required): Integer
- `season` (required): Integer

**Response** (200 OK):
```json
{
  "picks": [
    {
      "gameId": "game-002",
      "teamId": "team-kc-uuid",
      "isWinning": true,
      "currentScore": { "home": 14, "away": 10 }
    }
  ]
}
```
