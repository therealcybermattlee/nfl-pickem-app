<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safari Color Rendering Test - NFL Pick'em App</title>
    <style>
        /* Test similar color system to the app */
        :root {
            --foreground: 222.2 84% 4.9%;
            --background: 0 0% 100%;
            --muted-foreground: 215.4 16.3% 46.9%;
            
            /* Safari fallbacks */
            --foreground-rgb: 20, 20, 20;
            --background-rgb: 255, 255, 255;
            --muted-foreground-rgb: 107, 114, 126;
        }
        
        @media (prefers-color-scheme: dark) {
            :root {
                --foreground: 210 40% 98%;
                --background: 222.2 84% 4.9%;
                --muted-foreground: 215 20.2% 65.1%;
                
                --foreground-rgb: 250, 250, 250;
                --background-rgb: 15, 15, 15;
                --muted-foreground-rgb: 161, 161, 170;
            }
        }
        
        body {
            font-family: system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            
            /* Multi-layer fallbacks */
            color: rgb(var(--foreground-rgb, 20, 20, 20));
            color: hsl(var(--foreground));
            background: rgb(var(--background-rgb, 255, 255, 255));
            background: hsl(var(--background));
            
            /* Safari-specific fixes */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        /* Safari-specific overrides */
        @supports (-webkit-appearance: none) {
            body {
                color: rgb(var(--foreground-rgb));
                background: rgb(var(--background-rgb));
            }
        }
        
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            body {
                color: rgb(var(--foreground-rgb)) !important;
                background-color: rgb(var(--background-rgb)) !important;
            }
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .muted-text {
            color: rgb(var(--muted-foreground-rgb));
            color: hsl(var(--muted-foreground));
        }
        
        .chrome-info, .safari-info {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        
        .chrome-info {
            background-color: #e8f5e8;
        }
        
        .safari-info {
            background-color: #f0f8ff;
        }
        
        .color-test {
            display: inline-block;
            padding: 8px 16px;
            margin: 4px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Safari vs Chrome Color Rendering Test</h1>
    
    <div class="test-section">
        <h2>Primary Text Colors</h2>
        <p>This is regular text that should be dark in light mode and light in dark mode.</p>
        <p class="muted-text">This is muted text that should be gray in both modes.</p>
        
        <div class="chrome-info">
            <strong>Chrome Expected:</strong> Dark text (#141414) in light mode, Light text (#FAFAFA) in dark mode
        </div>
        
        <div class="safari-info">
            <strong>Safari Fixed:</strong> Should now match Chrome exactly with RGB fallbacks
        </div>
    </div>
    
    <div class="test-section">
        <h2>Color Test Swatches</h2>
        <div>
            <span class="color-test" style="color: rgb(20, 20, 20); background: #f5f5f5;">Dark Text (Light BG)</span>
            <span class="color-test" style="color: rgb(250, 250, 250); background: #0f0f0f;">Light Text (Dark BG)</span>
            <span class="color-test" style="color: rgb(107, 114, 126); background: #f5f5f5;">Muted (Light BG)</span>
            <span class="color-test" style="color: rgb(161, 161, 170); background: #0f0f0f;">Muted (Dark BG)</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Browser Detection</h2>
        <p>User Agent: <code id="userAgent"></code></p>
        <p>Browser: <span id="browserName"></span></p>
        <p>Color Support: <span id="colorSupport"></span></p>
    </div>
    
    <div class="test-section">
        <h2>Dark Mode Test</h2>
        <p>Current Color Scheme: <span id="colorScheme"></span></p>
        <button onclick="toggleDarkModeTest()">Toggle Test Mode</button>
    </div>
    
    <script>
        // Browser detection
        const userAgent = navigator.userAgent;
        document.getElementById('userAgent').textContent = userAgent;
        
        const isSafari = /Safari/.test(userAgent) && !/Chrome/.test(userAgent);
        const isChrome = /Chrome/.test(userAgent);
        
        document.getElementById('browserName').textContent = isSafari ? 'Safari' : 
                                                             isChrome ? 'Chrome' : 
                                                             'Other';
        
        // Color scheme detection
        const updateColorScheme = () => {
            const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            document.getElementById('colorScheme').textContent = isDark ? 'Dark' : 'Light';
        };
        
        updateColorScheme();
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateColorScheme);
        
        // Color support test
        const supportsCustomProps = CSS.supports('color', 'var(--test)');
        const supportsHSL = CSS.supports('color', 'hsl(0 0% 0%)');
        const supportsRGB = CSS.supports('color', 'rgb(0 0 0)');
        
        document.getElementById('colorSupport').innerHTML = `
            Custom Properties: ${supportsCustomProps ? '✅' : '❌'}<br>
            HSL: ${supportsHSL ? '✅' : '❌'}<br>
            RGB: ${supportsRGB ? '✅' : '❌'}
        `;
        
        // Dark mode toggle test
        function toggleDarkModeTest() {
            document.body.style.filter = document.body.style.filter ? '' : 'invert(1) hue-rotate(180deg)';
        }
    </script>
</body>
</html>