(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{814:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},2335:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var t=a(5155),r=a(2115),i=a(6489),n=a(63),d=a(6257),c=a(3209),l=a(7003),o=a(7812),m=a(4662),x=a(5917),h=a(5229);function u(e){let{game:s,userPick:a,onPickTeam:i,onRemovePick:n,isLoading:d=!1}=e,[u,j]=(0,r.useState)(!1),f=new Date(s.gameDate),v=f<=new Date,p=s.isCompleted,g=!v&&!p,N=async e=>{if(g&&!u){j(!0);try{await i(s.id,e)}finally{j(!1)}}},y=async()=>{if(g&&!u&&a){j(!0);try{await n(s.id)}finally{j(!1)}}},b=p?{text:"Final",variant:"destructive"}:v?{text:"In Progress",variant:"secondary"}:{text:(0,m.GP)(f,"MMM d, h:mm a"),variant:"outline"},w=e=>(null==a?void 0:a.teamId)===e,k=d||u,T=p&&a&&s.winnerTeamId?a.teamId===s.winnerTeamId?"correct":"incorrect":null;return(0,t.jsx)(c.Zp,{className:"w-full",children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)(o.E,{variant:b.variant,className:"text-xs",children:b.text}),a&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:["correct"===T&&(0,t.jsxs)(o.E,{variant:"default",className:"text-xs bg-green-100 text-green-800",children:[(0,t.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"Correct"]}),"incorrect"===T&&(0,t.jsxs)(o.E,{variant:"destructive",className:"text-xs",children:[(0,t.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Incorrect"]}),g&&(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:y,disabled:k,className:"text-xs",children:"Clear Pick"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[s.awayTeam.logo&&(0,t.jsx)("img",{src:s.awayTeam.logo,alt:"".concat(s.awayTeam.displayName," logo"),className:"w-8 h-8 object-contain"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:s.awayTeam.displayName}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["@ ",s.homeTeam.abbreviation]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[p&&(0,t.jsx)("div",{className:"text-lg font-bold",children:s.awayScore}),g?(0,t.jsx)(l.$,{variant:w(s.awayTeamId)?"default":"outline",size:"sm",onClick:()=>N(s.awayTeamId),disabled:k,children:w(s.awayTeamId)?"Picked":"Pick"}):w(s.awayTeamId)&&(0,t.jsx)(o.E,{variant:"secondary",children:"Your Pick"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[s.homeTeam.logo&&(0,t.jsx)("img",{src:s.homeTeam.logo,alt:"".concat(s.homeTeam.displayName," logo"),className:"w-8 h-8 object-contain"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:s.homeTeam.displayName}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["vs ",s.awayTeam.abbreviation]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[p&&(0,t.jsx)("div",{className:"text-lg font-bold",children:s.homeScore}),g?(0,t.jsx)(l.$,{variant:w(s.homeTeamId)?"default":"outline",size:"sm",onClick:()=>N(s.homeTeamId),disabled:k,children:w(s.homeTeamId)?"Picked":"Pick"}):w(s.homeTeamId)&&(0,t.jsx)(o.E,{variant:"secondary",children:"Your Pick"})]})]})]}),(s.homeSpread||s.overUnder||s.homeMoneyline||s.awayMoneyline)&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-2 text-center font-medium",children:"Betting Odds"}),s.homeSpread&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.awayTeam.abbreviation,":"]}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:s.homeSpread>0?"-".concat(Math.abs(s.homeSpread)):"+".concat(Math.abs(s.homeSpread))}),s.homeSpread>0&&(0,t.jsx)("span",{className:"text-[10px] text-red-600",children:"(Favorite)"}),s.homeSpread<0&&(0,t.jsx)("span",{className:"text-[10px] text-green-600",children:"(Underdog)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.homeTeam.abbreviation,":"]}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:s.homeSpread>0?"+".concat(s.homeSpread):"-".concat(Math.abs(s.homeSpread))}),s.homeSpread>0&&(0,t.jsx)("span",{className:"text-[10px] text-green-600",children:"(Underdog)"}),s.homeSpread<0&&(0,t.jsx)("span",{className:"text-[10px] text-red-600",children:"(Favorite)"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[s.overUnder&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-muted-foreground mb-1",children:"Total Points"}),(0,t.jsx)("div",{className:"font-medium",children:s.overUnder})]}),s.homeSpread&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-muted-foreground mb-1",children:"Spread"}),(0,t.jsxs)("div",{className:"font-medium",children:[Math.abs(s.homeSpread)," points"]})]})]}),(s.homeMoneyline||s.awayMoneyline)&&(0,t.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex justify-between text-[10px]",children:[s.awayMoneyline&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.awayTeam.abbreviation," Win:"]}),(0,t.jsx)("span",{className:"ml-1 font-medium",children:s.awayMoneyline>0?"+".concat(s.awayMoneyline):s.awayMoneyline})]}),s.homeMoneyline&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.homeTeam.abbreviation," Win:"]}),(0,t.jsx)("span",{className:"ml-1 font-medium",children:s.homeMoneyline>0?"+".concat(s.homeMoneyline):s.homeMoneyline})]})]})}),s.oddsUpdatedAt&&(0,t.jsx)("div",{className:"mt-2 text-center",children:(0,t.jsxs)("div",{className:"text-[9px] text-muted-foreground",children:["Updated: ",(0,m.GP)(new Date(s.oddsUpdatedAt),"MMM d, h:mm a"),s.oddsProvider&&" â€¢ ".concat(s.oddsProvider)]})})]}),!g&&!a&&(0,t.jsx)("div",{className:"mt-3 text-center text-sm text-muted-foreground",children:v?"Picking closed":"No pick made"})]})})}var j=a(9559),f=a(814),v=a(8720);function p(){let{data:e,status:s}=(0,i.useSession)(),a=(0,n.useRouter)(),[m,x]=(0,r.useState)([]),[h,p]=(0,r.useState)([]),[g,N]=(0,r.useState)(!0),[y,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{if("loading"!==s){if(!e)return void a.push("/signin");T()}},[e,s,a]);let T=async()=>{try{N(!0),k(null);let[e,s]=await Promise.all([fetch("/api/games"),fetch("/api/picks")]),[a,t]=await Promise.all([e.json(),s.json()]);if(!a.success)throw Error(a.error||"Failed to fetch games");if(!t.success)throw Error(t.error||"Failed to fetch picks");x(a.games),p(t.picks)}catch(e){k(e instanceof Error?e.message:"An error occurred")}finally{N(!1)}},P=async(e,s)=>{b(!0);try{let a=await fetch("/api/picks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameId:e,teamId:s})}),t=await a.json();if(!t.success)throw Error(t.error||"Failed to save pick");p(s=>{let a=s.findIndex(s=>s.gameId===e),r=t.pick;if(!(a>=0))return[...s,r];{let e=[...s];return e[a]=r,e}}),v.oR.success("Pick saved!")}catch(e){v.oR.error(e instanceof Error?e.message:"Failed to save pick")}finally{b(!1)}},M=async e=>{b(!0);try{let s=await fetch("/api/picks?gameId=".concat(e),{method:"DELETE"}),a=await s.json();if(!a.success)throw Error(a.error||"Failed to remove pick");p(s=>s.filter(s=>s.gameId!==e)),v.oR.success("Pick removed!")}catch(e){v.oR.error(e instanceof Error?e.message:"Failed to remove pick")}finally{b(!1)}};if("loading"===s||g)return(0,t.jsx)(d.O,{children:(0,t.jsx)("div",{className:"flex min-h-[50vh] items-center justify-center",children:(0,t.jsx)("div",{className:"text-center",children:"Loading..."})})});if(!e)return null;if(w)return(0,t.jsx)(d.O,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(c.Zp,{children:(0,t.jsxs)(c.Wu,{className:"p-6",children:[(0,t.jsx)("div",{className:"text-center text-destructive mb-4",children:w}),(0,t.jsxs)(l.$,{onClick:T,variant:"outline",size:"sm",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})})});let S=m.filter(e=>!e.isCompleted&&new Date(e.gameDate)>new Date),E=m.filter(e=>!e.isCompleted&&new Date(e.gameDate)<=new Date),I=m.filter(e=>e.isCompleted),C=e=>h.find(s=>s.gameId===e),A=h.length,D=h.filter(e=>{var s;return null==(s=m.find(s=>s.id===e.gameId))?void 0:s.isCompleted}).length,R=h.filter(e=>{let s=m.find(s=>s.id===e.gameId);return(null==s?void 0:s.isCompleted)&&s.winnerTeamId===e.teamId}).length;return(0,t.jsx)(d.O,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center",children:[(0,t.jsx)(f.A,{className:"h-8 w-8 mr-2"}),"Make Your Picks"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Choose the winning teams for this week's games"})]}),(0,t.jsxs)(l.$,{onClick:T,variant:"outline",size:"sm",disabled:g,children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2 ".concat(g?"animate-spin":"")}),"Refresh"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(c.Zp,{children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:A}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Picks"})]})}),(0,t.jsx)(c.Zp,{children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:S.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Games Left"})]})}),(0,t.jsx)(c.Zp,{children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:R}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Correct"})]})}),(0,t.jsx)(c.Zp,{children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[D>0?Math.round(R/D*100):0,"%"]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Win Rate"})]})})]}),S.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium mb-3 flex items-center",children:["Make Your Picks",(0,t.jsx)(o.E,{variant:"secondary",className:"ml-2",children:S.length})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:S.map(e=>(0,t.jsx)(u,{game:e,userPick:C(e.id),onPickTeam:P,onRemovePick:M,isLoading:y},e.id))})]}),E.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium mb-3 flex items-center",children:["Games in Progress",(0,t.jsx)(o.E,{variant:"secondary",className:"ml-2",children:E.length})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:E.map(e=>(0,t.jsx)(u,{game:e,userPick:C(e.id),onPickTeam:P,onRemovePick:M,isLoading:y},e.id))})]}),I.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium mb-3 flex items-center",children:["Completed Games",(0,t.jsx)(o.E,{variant:"secondary",className:"ml-2",children:I.length})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:I.map(e=>(0,t.jsx)(u,{game:e,userPick:C(e.id),onPickTeam:P,onRemovePick:M,isLoading:y},e.id))})]}),0===m.length&&(0,t.jsx)(c.Zp,{children:(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"No Games Available"}),(0,t.jsx)(c.BT,{children:"No games found for this week. Check back later or sync the latest games."})]})})]})})})}},5229:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7812:(e,s,a)=>{"use strict";a.d(s,{E:()=>d});var t=a(5155);a(2115);var r=a(3101),i=a(5016);let n=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)(n({variant:a}),s),...r})}},8640:(e,s,a)=>{Promise.resolve().then(a.bind(a,2335))},9559:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},e=>{e.O(0,[489,690,360,662,720,545,441,493,358],()=>e(e.s=8640)),_N_E=e.O()}]);