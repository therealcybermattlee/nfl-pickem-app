"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[408],{3408:(e,s,a)=>{a.d(s,{Q:()=>x});var t=a(5155),r=a(2115),n=a(3209),i=a(7812),d=a(4662);function c(e){let{game:s,showPicks:a=!1}=e,r=new Date(s.gameDate),c=r<=new Date,l=s.isCompleted,m=l?{text:"Final",variant:"destructive"}:c?{text:"In Progress",variant:"secondary"}:{text:(0,d.GP)(r,"MMM d, h:mm a"),variant:"outline"};return(0,t.jsx)(n.Zp,{className:"w-full",children:(0,t.jsxs)(n.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[s.awayTeam.logo&&(0,t.jsx)("img",{src:s.awayTeam.logo,alt:"".concat(s.awayTeam.displayName," logo"),className:"w-8 h-8 object-contain"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:s.awayTeam.displayName}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:s.awayTeam.abbreviation})]}),l&&(0,t.jsx)("div",{className:"text-lg font-bold",children:s.awayScore})]}),(0,t.jsxs)("div",{className:"text-center px-4",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:l?"":"@"}),(0,t.jsx)(i.E,{variant:m.variant,className:"text-xs",children:m.text})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1 justify-end",children:[l&&(0,t.jsx)("div",{className:"text-lg font-bold",children:s.homeScore}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:s.homeTeam.displayName}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:s.homeTeam.abbreviation})]}),s.homeTeam.logo&&(0,t.jsx)("img",{src:s.homeTeam.logo,alt:"".concat(s.homeTeam.displayName," logo"),className:"w-8 h-8 object-contain"})]})]}),(s.homeSpread||s.overUnder||s.homeMoneyline||s.awayMoneyline)&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-2 text-center font-medium",children:"Betting Odds"}),s.homeSpread&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.awayTeam.abbreviation,":"]}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:s.homeSpread>0?"-".concat(Math.abs(s.homeSpread)):"+".concat(Math.abs(s.homeSpread))}),s.homeSpread>0&&(0,t.jsx)("span",{className:"text-[10px] text-red-600",children:"(Favorite)"}),s.homeSpread<0&&(0,t.jsx)("span",{className:"text-[10px] text-green-600",children:"(Underdog)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.homeTeam.abbreviation,":"]}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:s.homeSpread>0?"+".concat(s.homeSpread):"-".concat(Math.abs(s.homeSpread))}),s.homeSpread>0&&(0,t.jsx)("span",{className:"text-[10px] text-green-600",children:"(Underdog)"}),s.homeSpread<0&&(0,t.jsx)("span",{className:"text-[10px] text-red-600",children:"(Favorite)"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[s.overUnder&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-muted-foreground mb-1",children:"Total Points"}),(0,t.jsx)("div",{className:"font-medium",children:s.overUnder})]}),s.homeSpread&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-muted-foreground mb-1",children:"Spread"}),(0,t.jsxs)("div",{className:"font-medium",children:[Math.abs(s.homeSpread)," points"]})]})]}),(s.homeMoneyline||s.awayMoneyline)&&(0,t.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex justify-between text-[10px]",children:[s.awayMoneyline&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.awayTeam.abbreviation," Win:"]}),(0,t.jsx)("span",{className:"ml-1 font-medium",children:s.awayMoneyline>0?"+".concat(s.awayMoneyline):s.awayMoneyline})]}),s.homeMoneyline&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s.homeTeam.abbreviation," Win:"]}),(0,t.jsx)("span",{className:"ml-1 font-medium",children:s.homeMoneyline>0?"+".concat(s.homeMoneyline):s.homeMoneyline})]})]})}),s.oddsUpdatedAt&&(0,t.jsx)("div",{className:"mt-2 text-center",children:(0,t.jsxs)("div",{className:"text-[9px] text-muted-foreground",children:["Updated: ",(0,d.GP)(new Date(s.oddsUpdatedAt),"MMM d, h:mm a"),s.oddsProvider&&" â€¢ ".concat(s.oddsProvider)]})})]}),l&&s.winnerTeamId&&(0,t.jsx)("div",{className:"mt-2 text-center",children:(0,t.jsxs)(i.E,{variant:"secondary",className:"text-xs",children:["Winner: ",s.winnerTeamId===s.homeTeamId?s.homeTeam.displayName:s.awayTeam.displayName]})}),a&&"picks"in s&&s.picks&&s.picks.length>0&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Recent Picks:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.picks.slice(0,3).map(e=>(0,t.jsxs)(i.E,{variant:"outline",className:"text-xs",children:[e.user.username||e.user.name,": ",e.team.abbreviation]},e.id)),s.picks.length>3&&(0,t.jsxs)(i.E,{variant:"outline",className:"text-xs",children:["+",s.picks.length-3," more"]})]})]})]})})}var l=a(7003),m=a(9559),o=a(6485);function x(e){let{week:s,season:a,showPicks:d=!1}=e,[x,h]=(0,r.useState)([]),[p,u]=(0,r.useState)(!0),[j,v]=(0,r.useState)(null),[g,f]=(0,r.useState)(1),[y,N]=(0,r.useState)(new Date().getFullYear()),b=async()=>{try{u(!0),v(null);let e=new URLSearchParams;s&&e.append("week",s.toString()),a&&e.append("season",a.toString());let t=await fetch("/api/games?".concat(e.toString())),r=await t.json();if(Array.isArray(r))h(r),f(s||1),N(a||new Date().getFullYear());else{if(!r.success)throw Error(r.error||"Failed to fetch games");h(r.games||[]),f(r.week||s||1),N(r.season||a||new Date().getFullYear())}}catch(e){v(e instanceof Error?e.message:"An error occurred")}finally{u(!1)}},w=async()=>{try{u(!0);let e=await fetch("/api/sync/games",{method:"POST"}),s=await e.json();if(!Array.isArray(s)&&!s.success)throw Error(s.error||"Failed to sync games");await b()}catch(e){v(e instanceof Error?e.message:"Sync failed"),u(!1)}};(0,r.useEffect)(()=>{b()},[s,a]);let k=x.filter(e=>e.isCompleted),S=x.filter(e=>!e.isCompleted);return p?(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"p-6",children:(0,t.jsx)("div",{className:"text-center",children:"Loading games..."})})}):j?(0,t.jsx)(n.Zp,{children:(0,t.jsxs)(n.Wu,{className:"p-6",children:[(0,t.jsx)("div",{className:"text-center text-destructive mb-4",children:j}),(0,t.jsxs)(l.$,{onClick:b,variant:"outline",size:"sm",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):0===x.length?(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center",children:[(0,t.jsx)(o.A,{className:"h-5 w-5 mr-2"}),"Week ",g,", ",y]}),(0,t.jsx)(n.BT,{children:"No games found for this week"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Games may not be available yet, or you might need to sync the latest data."}),(0,t.jsxs)(l.$,{onClick:w,variant:"outline",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Sync Latest Games"]})]})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.A,{className:"h-5 w-5"}),(0,t.jsxs)("h2",{className:"text-xl font-semibold",children:["Week ",g,", ",y]}),(0,t.jsxs)(i.E,{variant:"outline",children:[x.length," game",1!==x.length?"s":""]})]}),(0,t.jsxs)(l.$,{onClick:w,variant:"outline",size:"sm",disabled:p,children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2 ".concat(p?"animate-spin":"")}),"Sync Games"]})]}),S.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium mb-3 flex items-center",children:["Upcoming Games",(0,t.jsx)(i.E,{variant:"secondary",className:"ml-2",children:S.length})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:S.map(e=>(0,t.jsx)(c,{game:e,showPicks:d},e.id))})]}),k.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium mb-3 flex items-center",children:["Completed Games",(0,t.jsx)(i.E,{variant:"secondary",className:"ml-2",children:k.length})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:k.map(e=>(0,t.jsx)(c,{game:e,showPicks:d},e.id))})]})]})}},6485:(e,s,a)=>{a.d(s,{A:()=>t});let t=(0,a(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},7812:(e,s,a)=>{a.d(s,{E:()=>d});var t=a(5155);a(2115);var r=a(3101),n=a(5016);let i=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:a}),s),...r})}},9559:(e,s,a)=>{a.d(s,{A:()=>t});let t=(0,a(1847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}}]);