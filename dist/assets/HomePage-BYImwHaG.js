import{s as G,u as D,j as e,F as I,t as H,a as F,b as O}from"./index-C9195Kw7.js";import{r}from"./vendor-DLdglawL.js";import{A as P}from"./api-9Tv9JkjW.js";import{G as Q}from"./GameCard-C9sDE2BN.js";function _({title:t,titleId:i,...l},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},l),t?r.createElement("title",{id:i},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Y=r.forwardRef(_);function Z({title:t,titleId:i,...l},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},l),t?r.createElement("title",{id:i},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const R=r.forwardRef(Z);function q({title:t,titleId:i,...l},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},l),t?r.createElement("title",{id:i},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const J=r.forwardRef(q),V=({currentWeek:t,totalWeeks:i,onWeekSelect:l,gamesByWeek:d={},loading:n=!1,className:f=""})=>{const a=r.useRef(null),[u,b]=r.useState(!1),j=Array.from({length:i},(o,g)=>({number:g+1,gameCount:d[g+1]||0,isEmpty:(d[g+1]||0)===0}));r.useEffect(()=>{if(a.current&&!u){const o=a.current.querySelector(`[data-week="${t}"]`);o&&setTimeout(()=>{G(o,{behavior:"smooth",inline:"center",block:"nearest"})},100)}},[t,u]);const x=D(()=>{t<i&&c(t+1)},()=>{t>1&&c(t-1)}),c=o=>{n||o===t||(F("light"),l(o))},w=()=>b(!0),k=H(()=>b(!1),150);return e.jsxs("div",{className:`bg-white border-b border-gray-200 ${f}`,children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>c(t-1),disabled:t<=1||n,className:`p-2 rounded-full transition-colors ${t<=1||n?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Previous week",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Week ",t]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[d[t]||0," games"]})]}),e.jsx("button",{onClick:()=>c(t+1),disabled:t>=i||n,className:`p-2 rounded-full transition-colors ${t>=i||n?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Next week",children:e.jsx(R,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"relative overflow-x-auto scrollbar-hide",...x,children:e.jsx("div",{ref:a,className:"flex space-x-2 px-4 pb-4 snap-x snap-mandatory",onScrollCapture:w,onScrollEnd:k,children:j.map(o=>{const g=o.number===t,S=o.isEmpty||n;return e.jsx("button",{"data-week":o.number,onClick:()=>c(o.number),disabled:S,className:`flex-shrink-0 snap-center px-4 py-3 rounded-lg min-w-[80px] transition-all duration-200 ${g?"bg-blue-600 text-white shadow-lg":S?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-50 text-gray-700 hover:bg-gray-100 active:bg-blue-50"}`,"aria-label":`Week ${o.number}${o.gameCount?` (${o.gameCount} games)`:" (no games)"}`,"aria-current":g?"page":void 0,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Week ",o.number]}),o.gameCount>0&&e.jsxs("div",{className:"text-xs opacity-75 mt-1",children:[o.gameCount," games"]}),o.isEmpty&&e.jsx("div",{className:"text-xs opacity-50 mt-1",children:"No games"})]})},o.number)})})})]})},z=({users:t,selectedUserId:i,onUserSelect:l,loading:d=!1,className:n=""})=>{const[f,a]=r.useState(!1),u=t.find(x=>x.id===i),b=x=>{F("medium"),l(x),a(!1)},j=()=>{F("light"),a(!f)};return e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${n}`,children:[e.jsxs("button",{onClick:j,disabled:d,className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 active:bg-gray-100 transition-colors disabled:opacity-50","aria-expanded":f,"aria-haspopup":"listbox",children:[e.jsx("div",{className:"flex items-center space-x-3",children:u?e.jsxs(e.Fragment,{children:[u.avatar?e.jsx("img",{src:u.avatar,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:u.color||"#6B7280"},children:u.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-base font-medium text-gray-900",children:u.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-base text-gray-500",children:"Select a player..."})]})}),e.jsx(R,{className:`w-5 h-5 text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),f&&e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"py-2",role:"listbox","aria-label":"Select player",children:t.map(x=>{const c=x.id===i;return e.jsxs("button",{onClick:()=>b(x.id),className:`w-full flex items-center justify-between px-4 py-3 hover:bg-gray-50 active:bg-gray-100 transition-colors ${c?"bg-blue-50":""}`,role:"option","aria-selected":c,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[x.avatar?e.jsx("img",{src:x.avatar,alt:"",className:"w-6 h-6 rounded-full object-cover"}):e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",style:{backgroundColor:x.color||"#6B7280"},children:x.name.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-medium ${c?"text-blue-600":"text-gray-900"}`,children:x.name})]}),c&&e.jsx(Y,{className:"w-5 h-5 text-blue-600"})]},x.id)})})})]})},K=({stats:t,className:i=""})=>e.jsx("div",{className:`grid grid-cols-2 gap-4 ${i}`,children:t.map((l,d)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[l.icon&&e.jsx("div",{className:"flex justify-center mb-2",children:l.icon}),e.jsx("div",{className:`text-2xl font-bold ${l.color||"text-gray-900"}`,children:l.value}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:l.label})]},d))}),T=[{id:"dad-user-id",name:"Dad",color:"#3B82F6"},{id:"mom-user-id",name:"Mom",color:"#F59E0B"},{id:"twobow-user-id",name:"TwoBow",color:"#10B981"},{id:"rocky-user-id",name:"RockyDaRock",color:"#8B5CF6"}],X=()=>{const t=new Date("2025-09-04"),l=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24));if(l<0)return 1;const d=Math.floor(l/7)+1;return Math.min(Math.max(d,1),18)};function re(){const[t,i]=r.useState([]),[l,d]=r.useState([]),[n,f]=r.useState(""),[a,u]=r.useState(X()),[b]=r.useState(2025),[j,x]=r.useState(!0),[c,w]=r.useState(!1),[k,o]=r.useState(null),{isMobile:g}=O(),S=async(s,m=!1)=>{m?w(!0):x(!0),o(null);try{const h=await P.getGames(s,b);if(h.success&&h.data)i(h.data);else{o(h.error||`Failed to load games for Week ${s}`);return}try{const p=await P.get("/api/picks");if(p.success&&p.data){const N=p.data.picks||[];d(N)}}catch{console.log(`No picks found for Week ${s} or picks API unavailable`)}}catch{o(`Failed to load data for Week ${s}`)}finally{x(!1),w(!1)}};r.useEffect(()=>{S(a)},[a,b]);const W=()=>{a>1&&u(a-1)},U=()=>{a<18&&u(a+1)},E=s=>{s>=1&&s<=18&&s!==a&&u(s)},A=async(s,m,h)=>{var p;if(!n){alert("Please select a user first!");return}try{if((await P.submitPick({gameId:s,teamId:m,userId:n},"")).success){const $=((p=T.find(v=>v.id===n))==null?void 0:p.name)||"Unknown",C={gameId:s,userId:n,teamId:m,userName:$,teamAbbr:h};d(v=>[...v.filter(y=>!(y.gameId===s&&y.userId===n)),C])}else alert("Failed to save pick")}catch{alert("Failed to save pick")}},B=(s,m)=>l.find(h=>h.gameId===s&&h.userId===m),L=Array.from({length:18},(s,m)=>m+1).reduce((s,m)=>(s[m]=m<=18?Math.floor(Math.random()*16)+1:0,s),{});return t.length>0&&(L[a]=t.length),j?e.jsx("div",{className:"flex justify-center items-center min-h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"Loading games..."})}):k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-destructive mb-4",children:"Error Loading Games"}),e.jsx("p",{className:"text-muted-foreground",children:k})]}):e.jsxs("div",{className:"px-2 sm:px-4 lg:px-6",children:[!g&&e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-4 sm:mb-6 lg:mb-8",children:"NFL Pick'em Dashboard"}),g?e.jsx(V,{currentWeek:a,totalWeeks:18,onWeekSelect:E,gamesByWeek:L,loading:c,className:"mb-4"}):e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold",children:["Week ",a," - ",b," Season"]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:W,disabled:a<=1||c,className:`flex items-center gap-1 px-2 sm:px-3 py-2 rounded-md font-medium transition-colors text-sm ${a<=1||c?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:[e.jsx(I,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("select",{value:a,onChange:s=>E(parseInt(s.target.value)),disabled:c,className:"px-2 sm:px-3 py-2 border rounded-md bg-background font-medium min-w-[80px] sm:min-w-[120px] disabled:opacity-50 text-sm",children:Array.from({length:18},(s,m)=>m+1).map(s=>e.jsxs("option",{value:s,children:["Week ",s]},s))}),e.jsxs("button",{onClick:U,disabled:a>=18||c,className:`flex items-center gap-1 px-2 sm:px-3 py-2 rounded-md font-medium transition-colors text-sm ${a>=18||c?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx(R,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground mr-1 sm:mr-2 self-center",children:"Quick Jump:"}),[1,2,3,4,5,10,15,18].map(s=>e.jsxs("button",{onClick:()=>E(s),disabled:s===a||c,className:`px-1.5 sm:px-2 py-1 rounded text-xs font-medium transition-colors ${s===a?"bg-blue-600 text-white":c?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["W",s]},s))]}),c&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs sm:text-sm text-blue-600",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Loading Week ",a," games..."]})]}),g?e.jsx(z,{users:T,selectedUserId:n,onUserSelect:f,loading:j,className:"mb-4"}):e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2 sm:mb-3",children:"Select Player"}),e.jsxs("select",{value:n,onChange:s=>f(s.target.value),className:"w-full p-2 sm:p-3 border rounded-md bg-background text-sm sm:text-base",children:[e.jsx("option",{value:"",children:"Select a player..."}),T.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 lg:p-6",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold mb-3 sm:mb-4",children:["Week ",a," Games (",t.length," games)",c&&e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground ml-2",children:"(Loading...)"})]}),t.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsxs("p",{className:"text-muted-foreground text-base sm:text-lg mb-2",children:["No games found for Week ",a,", ",b]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Try selecting a different week or check back later for schedule updates."})]}):e.jsx("div",{className:"grid gap-3 sm:gap-4",children:t.map(s=>{const m=n?B(s.id,n):void 0;return e.jsx(Q,{game:s,userHasPick:!!m,userPickTeamId:m==null?void 0:m.teamId,onPickSubmit:(h,p)=>{var C,v,y,M;const N=((C=s.homeTeam)==null?void 0:C.id)||s.homeTeamId;(v=s.awayTeam)!=null&&v.id||s.awayTeamId;const $=p===N?(y=s.homeTeam)==null?void 0:y.abbreviation:(M=s.awayTeam)==null?void 0:M.abbreviation;A(h,p,$||"")},compactMode:g},s.id)})})]}),g?e.jsx(K,{stats:[{label:"Games This Week",value:t.length,color:"text-blue-600"},{label:n?"Your Picks":"Total Picks",value:n?l.filter(s=>s.userId===n).length:l.length,color:"text-green-600"},{label:"Current Week",value:a,color:"text-purple-600"},{label:"Season",value:b,color:"text-orange-600"}]}):e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 lg:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold mb-3 sm:mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:t.length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Games This Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:n?l.filter(s=>s.userId===n).length:l.length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:n?"Your Picks":"Total Picks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:a}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Current Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:b}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Season"})]})]})]})]})]})}export{re as HomePage};
