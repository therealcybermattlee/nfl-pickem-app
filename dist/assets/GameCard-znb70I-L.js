import{j as s}from"./index-sQv-WZDr.js";import{r as w}from"./vendor-DLdglawL.js";const N=e=>{const n=typeof e=="string"?new Date(e):e;return Math.max(0,Math.floor((n.getTime()-Date.now())/1e3))},S=e=>{const n=Math.floor(e/3600),t=Math.floor(e%3600/60),o=e%60;return n>0?[n,t,o].map(i=>i<10?`0${i}`:i).join(":"):[t,o].map(i=>i<10?`0${i}`:i).join(":")},D=e=>{const n=Math.floor(e/3600),t=Math.floor(e%3600/60);return n>0?`${n}h ${t}m`:`${t}m`},W=(e,n=0)=>{const t=typeof e=="string"?new Date(e):e,o=new Date(t.getTime()-n*60*1e3);return Date.now()>=o.getTime()},z=(e,n=0)=>{const t=typeof e=="string"?new Date(e):e;return new Date(t.getTime()-n*60*1e3)},B=e=>(typeof e=="string"?new Date(e):e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZoneName:"short"}),E=(e,n=!1)=>{const t=typeof e=="string"?new Date(e):e,o=t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});if(n){const i=B(t);return`${o} at ${i}`}return o},I=(e,n=0)=>W(e,n)?"This game is locked for picks. Submission deadline has passed.":null,T=({targetTime:e,mode:n="detailed",onFinish:t,className:o="",showIcon:i=!1,urgentThreshold:c=300})=>{const[l,m]=w.useState(N(e)),[a,g]=w.useState(!1),x=w.useCallback(()=>{const d=N(e);m(d),d<=0&&!a&&(g(!0),t==null||t())},[e,t,a]);w.useEffect(()=>{x();const d=setInterval(x,1e3);return()=>clearInterval(d)},[x]);const u=l>0&&l<=c,b=l<=0,y=()=>{if(b)return n==="minimal"?"0:00":"Expired";switch(n){case"compact":return D(l);case"minimal":return S(l);case"detailed":default:return S(l)}},C=()=>{let d="font-mono font-medium transition-colors duration-300";switch(b?d+=" text-red-600":u?d+=" text-orange-600 animate-pulse":d+=" text-gray-700",n){case"minimal":d+=" text-sm";break;case"compact":d+=" text-base";break;case"detailed":default:d+=" text-lg";break}return d},p=()=>s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),$=()=>{if(b)return"Time expired";const d=Math.floor(l/3600),j=Math.floor(l%3600/60),r=l%60;let h="";return d>0&&(h+=`${d} hour${d!==1?"s":""} `),j>0&&(h+=`${j} minute${j!==1?"s":""} `),d===0&&(h+=`${r} second${r!==1?"s":""} `),`${h.trim()} remaining`};return s.jsxs("div",{className:`inline-flex items-center ${o}`,role:"timer","aria-live":"assertive","aria-atomic":"true","aria-label":$(),children:[i&&s.jsx(p,{}),s.jsx("span",{className:C(),children:y()}),n==="detailed"&&!b&&s.jsx("span",{className:"text-xs text-gray-500 ml-1",children:u?"remaining!":"left"})]})},G={upcoming:{label:"OPEN",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-200",icon:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),description:"Picks are still open"},locked:{label:"LOCKED",bgColor:"bg-gray-100",textColor:"text-gray-800",borderColor:"border-gray-300",icon:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),description:"No more picks allowed"},inProgress:{label:"LIVE",bgColor:"bg-orange-100",textColor:"text-orange-800",borderColor:"border-orange-200",icon:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-7 4h12l-1 1H7l-1-1z"})}),description:"Game in progress"},final:{label:"FINAL",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200",icon:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),description:"Game completed"}},U={small:{container:"px-2 py-1 text-xs",icon:"w-3 h-3"},medium:{container:"px-3 py-1.5 text-sm",icon:"w-4 h-4"},large:{container:"px-4 py-2 text-base",icon:"w-5 h-5"}},A=({status:e,size:n="medium",showIcon:t=!1,className:o=""})=>{const i=G[e],c=U[n];return s.jsxs("span",{className:`
        inline-flex items-center gap-1.5 rounded-full font-medium border transition-all duration-200
        ${i.bgColor} ${i.textColor} ${i.borderColor}
        ${c.container}
        ${o}
      `,role:"status","aria-label":i.description,title:i.description,children:[t&&s.jsx("span",{className:c.icon,"aria-hidden":"true",children:i.icon}),s.jsx("span",{children:i.label})]})},H=(e,n,t=0)=>{const o=typeof e=="string"?new Date(e):e,i=Date.now(),c=o.getTime(),l=c-t*60*1e3;return n?"final":i>=c?"inProgress":i>=l?"locked":"upcoming"},M=({deadline:e,gameId:n,userHasPick:t=!1,isAutoPickEnabled:o=!1,onDeadlineReached:i,className:c="",compact:l=!1})=>{const[m,a]=w.useState(N(e)<=0);return w.useEffect(()=>{const g=()=>{N(e)<=0&&!m&&(a(!0),i==null||i(n))};g();const x=setInterval(g,1e3);return()=>clearInterval(x)},[e,n,m,i]),I(e),m?t?s.jsx("div",{className:`flex items-center space-x-2 ${c}`,children:s.jsxs("div",{className:"flex items-center text-green-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm font-medium",children:"Pick submitted"})]})}):o?s.jsx("div",{className:`flex items-center space-x-2 ${c}`,children:s.jsxs("div",{className:"flex items-center text-orange-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm font-medium",children:"Auto-pick will be assigned"})]})}):s.jsx("div",{className:`flex items-center space-x-2 ${c}`,children:s.jsxs("div",{className:"flex items-center text-red-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.664-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),s.jsx("span",{className:"text-sm font-medium",children:"Deadline passed"})]})}):t?s.jsxs("div",{className:`flex items-center space-x-2 ${c}`,children:[s.jsxs("div",{className:"flex items-center text-green-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm font-medium",children:"Pick submitted"})]}),!l&&s.jsx("div",{className:"text-xs text-gray-500",children:"Can change until deadline"})]}):s.jsxs("div",{className:`space-y-2 ${c}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`font-medium ${l?"text-sm":"text-base"} text-gray-700`,children:"Pick deadline"}),s.jsx(T,{targetTime:e,mode:l?"compact":"detailed",urgentThreshold:300,className:"bg-orange-50 px-2 py-1 rounded"})]}),!l&&s.jsx("div",{className:"text-xs text-gray-500",children:o?"Submit your pick or one will be assigned automatically":"Submit your pick before time expires"})]})},K=({games:e,onDeadlineReached:n,className:t})=>{const o=e.filter(c=>N(c.deadline)>0),i=o.reduce((c,l)=>new Date(l.deadline).getTime()<c.getTime()?new Date(l.deadline):c,new Date(Date.now()+7*24*60*60*1e3));return o.length===0?s.jsx("div",{className:`text-center p-4 text-gray-500 ${t}`,children:"All pick deadlines have passed"}):s.jsxs("div",{className:`bg-gradient-to-r from-blue-50 to-orange-50 p-4 rounded-lg ${t}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Next deadline in:"}),s.jsx(T,{targetTime:i,mode:"compact",urgentThreshold:900})]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[o.length," game",o.length!==1?"s":""," with pending picks"]})]})},O=(e,n=!0)=>`${e>0?"+":""}${e.toFixed(1)}`,P=e=>e.toFixed(1),Z=({game:e,userHasPick:n=!1,userPickTeamId:t,onPickSubmit:o,onViewPick:i,className:c="",lockOffsetMinutes:l=0,isAutoPickEnabled:m=!1,compactMode:a=!1})=>{var j;const g="isLocked"in e,x=g?e:null,u=H(e.gameDate,e.isCompleted,l),b=x!=null&&x.lockTime?new Date(x.lockTime):z(e.gameDate,l),y=g?!(x!=null&&x.isLocked)&&!e.isCompleted:u==="upcoming",C=r=>e.isCompleted&&e.winnerTeamId===r,p=()=>{if(!e.isCompleted||!e.winnerTeamId||e.homeScore===null||e.awayScore===null)return null;const r=e.winnerTeamId===e.homeTeam.id,h=r?e.homeTeam.abbreviation:e.awayTeam.abbreviation,v=r?e.homeScore:e.awayScore,f=r?e.awayScore:e.homeScore,k=v-f;return{winnerName:h,winnerScore:v,loserScore:f,margin:k}},$=({team:r,isHome:h,score:v})=>{const f=C(r==null?void 0:r.id),k=e.isCompleted&&e.winnerTeamId&&!f&&e.winnerTeamId!==(r==null?void 0:r.id);return s.jsxs("div",{className:`text-center transition-all duration-300 ${f?"ring-1 ring-green-500/30 bg-green-50/50 rounded-lg p-2":k?"opacity-70":""}`,children:[s.jsxs("div",{className:`
          ${a?"w-12 h-12":"w-16 h-16"} 
          bg-primary/10 rounded-full flex items-center justify-center mb-2 overflow-hidden mx-auto
          ${t===(r==null?void 0:r.id)?"ring-2 ring-brand bg-brand-surface":""}
        `,children:[r!=null&&r.logo?s.jsx("img",{src:r.logo,alt:`${r.name} logo`,className:`${a?"w-8 h-8":"w-12 h-12"} object-contain`,onError:L=>{L.currentTarget.style.display="none",L.currentTarget.nextElementSibling.style.display="block"}}):null,s.jsx("span",{className:`font-bold ${a?"text-sm":"text-lg"} text-primary ${r!=null&&r.logo?"hidden":""}`,style:{display:r!=null&&r.logo?"none":"block"},children:(r==null?void 0:r.abbreviation)||(h?"HOME":"AWAY")})]}),s.jsxs("div",{className:`font-semibold ${a?"text-sm":"text-base"} ${f?"font-bold text-green-700":k?"text-muted-foreground":""} flex items-center justify-center gap-1`,children:[f&&s.jsx("span",{className:"text-yellow-500",role:"img","aria-label":"Winner",children:"ðŸ†"}),a?r==null?void 0:r.abbreviation:(r==null?void 0:r.name)||`${h?"Home":"Away"} Team`]}),!a&&s.jsx("div",{className:`text-sm ${f?"text-green-600":"text-muted-foreground"}`,children:r==null?void 0:r.abbreviation}),v!=null&&s.jsx("div",{className:`${a?"text-xl":"text-2xl"} font-bold mt-2 ${f?"text-green-600":k?"text-muted-foreground":"text-foreground"}`,children:v}),t===(r==null?void 0:r.id)&&s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-brand-surface text-brand-surface-foreground",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Your Pick"]})})]})},d=()=>!y||!o?null:s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>o(e.id,e.awayTeam.id),disabled:t===e.awayTeam.id,className:`
            px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 touch-manipulation
            ${t===e.awayTeam.id?"bg-brand text-brand-foreground shadow-md":"bg-secondary text-secondary-foreground hover:bg-brand-surface hover:text-brand-surface-foreground active:scale-95"}
          `,children:["Pick ",e.awayTeam.abbreviation]}),s.jsxs("button",{onClick:()=>o(e.id,e.homeTeam.id),disabled:t===e.homeTeam.id,className:`
            px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 touch-manipulation
            ${t===e.homeTeam.id?"bg-brand text-brand-foreground shadow-md":"bg-secondary text-secondary-foreground hover:bg-brand-surface hover:text-brand-surface-foreground active:scale-95"}
          `,children:["Pick ",e.homeTeam.abbreviation]})]});return s.jsxs("div",{className:`
      bg-card rounded-lg border shadow-sm hover:shadow-md transition-all duration-200
      ${a?"p-4":"p-6"}
      ${c}
    `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:`text-muted-foreground ${a?"text-xs":"text-sm"}`,children:["Game #",e.id," â€¢ Week ",e.week]}),!a&&s.jsx("div",{className:"text-sm font-medium text-foreground",children:E(e.gameDate,!0)})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.isCompleted&&p()?s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:[s.jsx("span",{className:"mr-1",role:"img","aria-label":"Trophy",children:"ðŸ†"}),p().winnerName," WINS ",p().winnerScore,"-",p().loserScore]}),!a&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Margin: ",p().margin," point",p().margin!==1?"s":""]})]}):s.jsx(A,{status:u,size:a?"small":"medium",showIcon:!a}),y&&s.jsx(T,{targetTime:(x==null?void 0:x.lockTime)||e.gameDate,mode:a?"compact":"detailed",className:"text-right"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx($,{team:e.awayTeam,isHome:!1,score:e.awayScore})}),s.jsx("div",{className:`${a?"text-xl":"text-2xl"} font-bold px-4 ${e.isCompleted?"text-muted-foreground/50":"text-muted-foreground"}`,children:e.isCompleted?"vs":"@"}),s.jsx("div",{className:"flex-1",children:s.jsx($,{team:e.homeTeam,isHome:!0,score:e.homeScore})})]}),(e.homeSpread||e.overUnder)&&!a&&s.jsxs("div",{className:"flex justify-center space-x-4 mb-4 text-sm text-muted-foreground",children:[e.homeSpread&&s.jsxs("div",{children:[(j=e.homeTeam)==null?void 0:j.abbreviation," ",O(e.homeSpread)]}),e.overUnder&&s.jsxs("div",{children:["O/U: ",P(e.overUnder)]})]}),u==="upcoming"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx(M,{deadline:b,gameId:e.id,userHasPick:n,isAutoPickEnabled:m,compact:a}),s.jsx(d,{})]}),(u==="locked"||u==="inProgress"||u==="final")&&n&&s.jsx("div",{className:"mt-4 p-3 bg-success-surface rounded-lg border border-success",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-success-surface-foreground",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{className:"text-sm font-medium",children:["Pick submitted: ",t===e.homeTeam.id?e.homeTeam.name:e.awayTeam.name]})]}),i&&s.jsx("button",{onClick:()=>i(e.id),className:"text-success text-sm hover:text-success-surface-foreground transition-colors",children:"View"})]})}),u==="locked"&&!n&&m&&s.jsx("div",{className:"mt-4 p-3 bg-warning-surface rounded-lg border border-warning",children:s.jsxs("div",{className:"flex items-center text-warning-surface-foreground",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm",children:"Auto-pick will be assigned"})]})})]})};export{K as B,Z as G,A as a};
