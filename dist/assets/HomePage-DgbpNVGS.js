import{s as _,u as Z,j as e,F as B,t as q,a as I,b as J}from"./index-ww_31RWK.js";import{r as n}from"./vendor-DLdglawL.js";import{A as F}from"./api-9Tv9JkjW.js";function V({title:t,titleId:i,...l},m){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":i},l),t?n.createElement("title",{id:i},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const z=n.forwardRef(V);function K({title:t,titleId:i,...l},m){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":i},l),t?n.createElement("title",{id:i},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const L=n.forwardRef(K);function X({title:t,titleId:i,...l},m){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":i},l),t?n.createElement("title",{id:i},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const ee=n.forwardRef(X),se=({currentWeek:t,totalWeeks:i,onWeekSelect:l,gamesByWeek:m={},loading:a=!1,className:f=""})=>{const r=n.useRef(null),[h,b]=n.useState(!1),v=Array.from({length:i},(o,p)=>({number:p+1,gameCount:m[p+1]||0,isEmpty:(m[p+1]||0)===0}));n.useEffect(()=>{if(r.current&&!h){const o=r.current.querySelector(`[data-week="${t}"]`);o&&setTimeout(()=>{_(o,{behavior:"smooth",inline:"center",block:"nearest"})},100)}},[t,h]);const u=Z(()=>{t<i&&d(t+1)},()=>{t>1&&d(t-1)}),d=o=>{a||o===t||(I("light"),l(o))},k=()=>b(!0),S=q(()=>b(!1),150);return e.jsxs("div",{className:`bg-white border-b border-gray-200 ${f}`,children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>d(t-1),disabled:t<=1||a,className:`p-2 rounded-full transition-colors ${t<=1||a?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Previous week",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Week ",t]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m[t]||0," games"]})]}),e.jsx("button",{onClick:()=>d(t+1),disabled:t>=i||a,className:`p-2 rounded-full transition-colors ${t>=i||a?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Next week",children:e.jsx(L,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"relative overflow-x-auto scrollbar-hide",...u,children:e.jsx("div",{ref:r,className:"flex space-x-2 px-4 pb-4 snap-x snap-mandatory",onScrollCapture:k,onScrollEnd:S,children:v.map(o=>{const p=o.number===t,C=o.isEmpty||a;return e.jsx("button",{"data-week":o.number,onClick:()=>d(o.number),disabled:C,className:`flex-shrink-0 snap-center px-4 py-3 rounded-lg min-w-[80px] transition-all duration-200 ${p?"bg-blue-600 text-white shadow-lg":C?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-50 text-gray-700 hover:bg-gray-100 active:bg-blue-50"}`,"aria-label":`Week ${o.number}${o.gameCount?` (${o.gameCount} games)`:" (no games)"}`,"aria-current":p?"page":void 0,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Week ",o.number]}),o.gameCount>0&&e.jsxs("div",{className:"text-xs opacity-75 mt-1",children:[o.gameCount," games"]}),o.isEmpty&&e.jsx("div",{className:"text-xs opacity-50 mt-1",children:"No games"})]})},o.number)})})})]})},te=({users:t,selectedUserId:i,onUserSelect:l,loading:m=!1,className:a=""})=>{const[f,r]=n.useState(!1),h=t.find(u=>u.id===i),b=u=>{I("medium"),l(u),r(!1)},v=()=>{I("light"),r(!f)};return e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${a}`,children:[e.jsxs("button",{onClick:v,disabled:m,className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 active:bg-gray-100 transition-colors disabled:opacity-50","aria-expanded":f,"aria-haspopup":"listbox",children:[e.jsx("div",{className:"flex items-center space-x-3",children:h?e.jsxs(e.Fragment,{children:[h.avatar?e.jsx("img",{src:h.avatar,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:h.color||"#6B7280"},children:h.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-base font-medium text-gray-900",children:h.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-base text-gray-500",children:"Select a player..."})]})}),e.jsx(L,{className:`w-5 h-5 text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),f&&e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"py-2",role:"listbox","aria-label":"Select player",children:t.map(u=>{const d=u.id===i;return e.jsxs("button",{onClick:()=>b(u.id),className:`w-full flex items-center justify-between px-4 py-3 hover:bg-gray-50 active:bg-gray-100 transition-colors ${d?"bg-blue-50":""}`,role:"option","aria-selected":d,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[u.avatar?e.jsx("img",{src:u.avatar,alt:"",className:"w-6 h-6 rounded-full object-cover"}):e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",style:{backgroundColor:u.color||"#6B7280"},children:u.name.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-medium ${d?"text-blue-600":"text-gray-900"}`,children:u.name})]}),d&&e.jsx(z,{className:"w-5 h-5 text-blue-600"})]},u.id)})})})]})},ae=({stats:t,className:i=""})=>e.jsx("div",{className:`grid grid-cols-2 gap-4 ${i}`,children:t.map((l,m)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[l.icon&&e.jsx("div",{className:"flex justify-center mb-2",children:l.icon}),e.jsx("div",{className:`text-2xl font-bold ${l.color||"text-gray-900"}`,children:l.value}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:l.label})]},m))}),P=[{id:"dad-user-id",name:"Dad",color:"#3B82F6"},{id:"mom-user-id",name:"Mom",color:"#F59E0B"},{id:"twobow-user-id",name:"TwoBow",color:"#10B981"},{id:"rocky-user-id",name:"RockyDaRock",color:"#8B5CF6"}],re=()=>{const t=new Date("2025-09-04"),l=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24));if(l<0)return 1;const m=Math.floor(l/7)+1;return Math.min(Math.max(m,1),18)};function ie(){const[t,i]=n.useState([]),[l,m]=n.useState([]),[a,f]=n.useState(""),[r,h]=n.useState(re()),[b]=n.useState(2025),[v,u]=n.useState(!0),[d,k]=n.useState(!1),[S,o]=n.useState(null),{isMobile:p}=J(),C=async(s,x=!1)=>{x?k(!0):u(!0),o(null);try{const c=await F.getGames(s,b);if(c.success&&c.data)i(c.data);else{o(c.error||`Failed to load games for Week ${s}`);return}try{const g=await F.get("/api/picks");if(g.success&&g.data){const N=g.data.picks||[];m(N)}}catch{console.log(`No picks found for Week ${s} or picks API unavailable`)}}catch{o(`Failed to load data for Week ${s}`)}finally{u(!1),k(!1)}};n.useEffect(()=>{C(r)},[r,b]);const G=()=>{r>1&&h(r-1)},H=()=>{r<18&&h(r+1)},$=s=>{s>=1&&s<=18&&s!==r&&h(s)},R=async(s,x,c)=>{var g;if(!a){alert("Please select a user first!");return}try{if((await F.submitPick({gameId:s,teamId:x,userId:a},"")).success){const E=((g=P.find(y=>y.id===a))==null?void 0:g.name)||"Unknown",T={gameId:s,userId:a,teamId:x,userName:E,teamAbbr:c};m(y=>[...y.filter(w=>!(w.gameId===s&&w.userId===a)),T])}else alert("Failed to save pick")}catch{alert("Failed to save pick")}},O=(s,x)=>l.find(c=>c.gameId===s&&c.userId===x),Y=s=>l.filter(x=>x.gameId===s),A=Array.from({length:18},(s,x)=>x+1).reduce((s,x)=>(s[x]=x<=18?Math.floor(Math.random()*16)+1:0,s),{});return t.length>0&&(A[r]=t.length),v?e.jsx("div",{className:"flex justify-center items-center min-h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"Loading games..."})}):S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-destructive mb-4",children:"Error Loading Games"}),e.jsx("p",{className:"text-muted-foreground",children:S})]}):e.jsxs("div",{className:"px-2 sm:px-4 lg:px-6",children:[!p&&e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-4 sm:mb-6 lg:mb-8",children:"NFL Pick'em Dashboard"}),p?e.jsx(se,{currentWeek:r,totalWeeks:18,onWeekSelect:$,gamesByWeek:A,loading:d,className:"mb-4"}):e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold",children:["Week ",r," - ",b," Season"]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:G,disabled:r<=1||d,className:`flex items-center gap-1 px-2 sm:px-3 py-2 rounded-md font-medium transition-colors text-sm ${r<=1||d?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:[e.jsx(B,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("select",{value:r,onChange:s=>$(parseInt(s.target.value)),disabled:d,className:"px-2 sm:px-3 py-2 border rounded-md bg-background font-medium min-w-[80px] sm:min-w-[120px] disabled:opacity-50 text-sm",children:Array.from({length:18},(s,x)=>x+1).map(s=>e.jsxs("option",{value:s,children:["Week ",s]},s))}),e.jsxs("button",{onClick:H,disabled:r>=18||d,className:`flex items-center gap-1 px-2 sm:px-3 py-2 rounded-md font-medium transition-colors text-sm ${r>=18||d?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx(L,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground mr-1 sm:mr-2 self-center",children:"Quick Jump:"}),[1,2,3,4,5,10,15,18].map(s=>e.jsxs("button",{onClick:()=>$(s),disabled:s===r||d,className:`px-1.5 sm:px-2 py-1 rounded text-xs font-medium transition-colors ${s===r?"bg-blue-600 text-white":d?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["W",s]},s))]}),d&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs sm:text-sm text-blue-600",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Loading Week ",r," games..."]})]}),p?e.jsx(te,{users:P,selectedUserId:a,onUserSelect:f,loading:v,className:"mb-4"}):e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2 sm:mb-3",children:"Select Player"}),e.jsxs("select",{value:a,onChange:s=>f(s.target.value),className:"w-full p-2 sm:p-3 border rounded-md bg-background text-sm sm:text-base",children:[e.jsx("option",{value:"",children:"Select a player..."}),P.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 lg:p-6",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold mb-3 sm:mb-4",children:["Week ",r," Games (",t.length," games)",d&&e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground ml-2",children:"(Loading...)"})]}),t.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsxs("p",{className:"text-muted-foreground text-base sm:text-lg mb-2",children:["No games found for Week ",r,", ",b]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Try selecting a different week or check back later for schedule updates."})]}):e.jsx("div",{className:"grid gap-3 sm:gap-4",children:t.map(s=>{var N,E,T,y,w,M,U,W,D;const x=Y(s.id),c=a?O(s.id,a):void 0,g=s.isCompleted;return e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:`text-center p-2 sm:p-3 rounded cursor-pointer transition-colors ${(c==null?void 0:c.teamId)===s.awayTeamId?"bg-green-100 border-2 border-green-500":a&&!g?"hover:bg-blue-50 active:bg-blue-100":""}`,onClick:()=>{var j;return!g&&a?R(s.id,s.awayTeamId,((j=s.awayTeam)==null?void 0:j.abbreviation)||"AWAY"):null},children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:((N=s.awayTeam)==null?void 0:N.abbreviation)||`Team ${s.awayTeamId}`}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground hidden sm:block",children:(E=s.awayTeam)==null?void 0:E.name}),e.jsx("div",{className:"text-xs text-muted-foreground sm:hidden",children:((y=(T=s.awayTeam)==null?void 0:T.name)==null?void 0:y.split(" ").pop())||"Away"})]}),e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-muted-foreground text-center",children:"@"}),e.jsxs("div",{className:`text-center p-2 sm:p-3 rounded cursor-pointer transition-colors ${(c==null?void 0:c.teamId)===s.homeTeamId?"bg-green-100 border-2 border-green-500":a&&!g?"hover:bg-blue-50 active:bg-blue-100":""}`,onClick:()=>{var j;return!g&&a?R(s.id,s.homeTeamId,((j=s.homeTeam)==null?void 0:j.abbreviation)||"HOME"):null},children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:((w=s.homeTeam)==null?void 0:w.abbreviation)||`Team ${s.homeTeamId}`}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground hidden sm:block",children:(M=s.homeTeam)==null?void 0:M.name}),e.jsx("div",{className:"text-xs text-muted-foreground sm:hidden",children:((W=(U=s.homeTeam)==null?void 0:U.name)==null?void 0:W.split(" ").pop())||"Home"})]})]}),e.jsxs("div",{className:"text-center sm:text-right",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mb-1",children:new Date(s.gameDate).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:s.isCompleted?"FINAL":"SCHEDULED"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm text-muted-foreground mb-3",children:[s.homeSpread&&e.jsxs("div",{children:["Spread: ",(D=s.homeTeam)==null?void 0:D.abbreviation," ",s.homeSpread>0?`+${s.homeSpread}`:`${s.homeSpread}`]}),s.overUnder&&e.jsxs("div",{children:["O/U: ",s.overUnder]})]}),x.length>0&&e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium mb-2",children:"Current Picks:"}),e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:x.map((j,Q)=>e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[j.userName,": ",j.teamAbbr]},Q))})]}),a&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded text-xs sm:text-sm",children:c?e.jsxs("span",{className:"text-green-600 font-medium",children:["✓ You picked: ",c.teamAbbr]}):g?e.jsx("span",{className:"text-red-600",children:"Game has started - no picks allowed"}):e.jsx("span",{className:"text-blue-600",children:"Tap a team to make your pick"})})]},s.id)})})]}),p?e.jsx(ae,{stats:[{label:"Games This Week",value:t.length,color:"text-blue-600"},{label:a?"Your Picks":"Total Picks",value:a?l.filter(s=>s.userId===a).length:l.length,color:"text-green-600"},{label:"Current Week",value:r,color:"text-purple-600"},{label:"Season",value:b,color:"text-orange-600"}]}):e.jsxs("div",{className:"bg-card rounded-lg border p-3 sm:p-4 lg:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold mb-3 sm:mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:t.length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Games This Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:a?l.filter(s=>s.userId===a).length:l.length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:a?"Your Picks":"Total Picks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:r}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Current Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:b}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Season"})]})]})]})]})]})}export{ie as HomePage};
