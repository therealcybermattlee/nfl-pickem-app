/* Import accessibility styles */
@import './styles/accessibility.css';

/* Import mobile-specific styles */
@import './styles/mobile.css';

/* Import Safari compatibility fixes */
@import './styles/safari-compatibility.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* HSL values without hsl() wrapper for compatibility */
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --primary: 222.2 47.4% 11.2%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222.2 47.4% 11.2%;
  --muted: 210 40% 96%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96%;
  --accent-foreground: 222.2 47.4% 11.2%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 222.2 84% 4.9%;
  --radius: 0.5rem;

  /* Semantic brand and interaction colors */
  --brand: 215 100% 39%;
  --brand-foreground: 210 40% 98%;
  --brand-surface: 210 100% 97%;
  --brand-surface-foreground: 215 100% 30%;
  
  /* Success colors */
  --success: 142 71% 45%;
  --success-foreground: 210 40% 98%;
  --success-surface: 138 76% 96%;
  --success-surface-foreground: 142 71% 35%;
  
  /* Warning colors */
  --warning: 24 94% 50%;
  --warning-foreground: 210 40% 98%;
  --warning-surface: 32 100% 96%;
  --warning-surface-foreground: 24 94% 40%;

  /* Safari-specific fallback colors (RGB values) */
  --foreground-rgb: 20, 20, 20;
  --background-rgb: 255, 255, 255;
  --muted-foreground-rgb: 107, 114, 126;
  --primary-rgb: 25, 25, 25;
  --border-rgb: 229, 231, 235;
  --brand-rgb: 30, 100, 200;
  --brand-surface-rgb: 237, 245, 255;
  --success-rgb: 34, 197, 94;
  --success-surface-rgb: 240, 253, 244;
  --warning-rgb: 251, 146, 60;
  --warning-surface-rgb: 255, 251, 235;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222 63% 7%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;

    /* Dark mode semantic colors */
    --brand: 215 92% 77%;
    --brand-foreground: 215 15% 15%;
    --brand-surface: 215 45% 22%;
    --brand-surface-foreground: 215 92% 85%;
    
    --success: 142 70% 72%;
    --success-foreground: 142 30% 15%;
    --success-surface: 140 30% 20%;
    --success-surface-foreground: 142 70% 80%;
    
    --warning: 32 100% 75%;
    --warning-foreground: 28 15% 15%;
    --warning-surface: 28 35% 20%;
    --warning-surface-foreground: 32 100% 80%;

    /* Safari-specific fallback colors for dark mode (RGB values) */
    --foreground-rgb: 250, 250, 250;
    --background-rgb: 15, 15, 15;
    --muted-foreground-rgb: 161, 161, 170;
    --primary-rgb: 250, 250, 250;
    --border-rgb: 39, 39, 42;
    --brand-rgb: 147, 197, 253;
    --brand-surface-rgb: 30, 58, 138;
    --success-rgb: 134, 239, 172;
    --success-surface-rgb: 20, 83, 45;
    --warning-rgb: 253, 186, 116;
    --warning-surface-rgb: 120, 53, 15;
  }
}

/* Manual theme override capability */
html[data-theme="dark"] {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222 63% 7%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --primary: 210 40% 98%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 212.7 26.8% 83.9%;

  /* Dark mode semantic colors */
  --brand: 215 92% 77%;
  --brand-foreground: 215 15% 15%;
  --brand-surface: 215 45% 22%;
  --brand-surface-foreground: 215 92% 85%;
  
  --success: 142 70% 72%;
  --success-foreground: 142 30% 15%;
  --success-surface: 140 30% 20%;
  --success-surface-foreground: 142 70% 80%;
  
  --warning: 32 100% 75%;
  --warning-foreground: 28 15% 15%;
  --warning-surface: 28 35% 20%;
  --warning-surface-foreground: 32 100% 80%;

  /* Safari-specific fallback colors for dark mode (RGB values) */
  --foreground-rgb: 250, 250, 250;
  --background-rgb: 15, 15, 15;
  --muted-foreground-rgb: 161, 161, 170;
  --primary-rgb: 250, 250, 250;
  --border-rgb: 39, 39, 42;
  --brand-rgb: 147, 197, 253;
  --brand-surface-rgb: 30, 58, 138;
  --success-rgb: 134, 239, 172;
  --success-surface-rgb: 20, 83, 45;
  --warning-rgb: 253, 186, 116;
  --warning-surface-rgb: 120, 53, 15;
}

* {
  border-color: hsl(var(--border));
}

body {
  /* Safari-specific fixes for text rendering */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  
  /* Multi-layer color fallbacks for Safari compatibility */
  color: rgb(var(--foreground-rgb, 20, 20, 20));
  color: hsl(var(--foreground));
  background: rgb(var(--background-rgb, 255, 255, 255));
  background: hsl(var(--background));
  
  font-feature-settings: "rlig" 1, "calt" 1;
}

/* Safari-specific color fixes */
@supports (-webkit-appearance: none) {
  body {
    /* Ensure proper color contrast in Safari */
    color: rgb(var(--foreground-rgb));
    background: rgb(var(--background-rgb));
  }
  
  /* Fix text color inheritance issues in Safari */
  h1, h2, h3, h4, h5, h6, p, span, div, a {
    color: inherit;
  }
}

/* Additional Safari WebKit fixes */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  body {
    /* Force color recalculation in Safari */
    color: rgb(var(--foreground-rgb));
    background-color: rgb(var(--background-rgb));
  }
}

/* Safari dark mode detection and fixes */
@media screen and (-webkit-min-device-pixel-ratio: 0) and (prefers-color-scheme: dark) {
  body {
    /* Explicit dark mode colors for Safari */
    color: rgb(250, 250, 250) !important;
    background-color: rgb(15, 15, 15) !important;
  }
  
  /* Ensure all text elements inherit proper colors */
  h1, h2, h3, h4, h5, h6, p, span, div, a, button, input, textarea, select {
    color: inherit;
  }
  
  /* Fix muted text colors in Safari dark mode */
  .text-gray-500, .text-gray-600, .text-muted-foreground {
    color: rgb(161, 161, 170) !important;
  }
}

/* Light mode explicit fixes for Safari */
@media screen and (-webkit-min-device-pixel-ratio: 0) and (prefers-color-scheme: light) {
  body {
    /* Explicit light mode colors for Safari */
    color: rgb(20, 20, 20) !important;
    background-color: rgb(255, 255, 255) !important;
  }
  
  /* Fix muted text colors in Safari light mode */
  .text-gray-500, .text-gray-600, .text-muted-foreground {
    color: rgb(107, 114, 126) !important;
  }
}

/* Cross-browser color consistency fixes */
.text-foreground {
  color: rgb(var(--foreground-rgb));
  color: hsl(var(--foreground));
}

.text-muted-foreground {
  color: rgb(var(--muted-foreground-rgb));
  color: hsl(var(--muted-foreground));
}

.bg-background {
  background-color: rgb(var(--background-rgb));
  background-color: hsl(var(--background));
}

@layer base {
  h1 {
    @apply scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl;
  }

  h2 {
    @apply scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight first:mt-0;
  }

  h3 {
    @apply scroll-m-20 text-2xl font-semibold tracking-tight;
  }

  h4 {
    @apply scroll-m-20 text-xl font-semibold tracking-tight;
  }

  p {
    @apply leading-7 [&:not(:first-child)]:mt-6;
  }
}

/* Safari-specific Tailwind color utility fixes */
@layer utilities {
  @media screen and (-webkit-min-device-pixel-ratio: 0) {
    /* Fix common Tailwind text colors in Safari */
    .text-gray-900 {
      color: rgb(17, 24, 39) !important;
    }
    
    .text-gray-800 {
      color: rgb(31, 41, 55) !important;
    }
    
    .text-gray-700 {
      color: rgb(55, 65, 81) !important;
    }
    
    .text-gray-600 {
      color: rgb(75, 85, 99) !important;
    }
    
    .text-gray-500 {
      color: rgb(107, 114, 126) !important;
    }
    
    .text-gray-400 {
      color: rgb(156, 163, 175) !important;
    }
    
    /* Dark mode Tailwind fixes for Safari */
    @media (prefers-color-scheme: dark) {
      .text-gray-900 {
        color: rgb(243, 244, 246) !important;
      }
      
      .text-gray-800 {
        color: rgb(229, 231, 235) !important;
      }
      
      .text-gray-700 {
        color: rgb(209, 213, 219) !important;
      }
      
      .text-gray-600 {
        color: rgb(156, 163, 175) !important;
      }
      
      .text-gray-500 {
        color: rgb(107, 114, 126) !important;
      }
      
      .text-gray-400 {
        color: rgb(75, 85, 99) !important;
      }
    }
    
    /* Blue text colors commonly used in the app */
    .text-blue-600 {
      color: rgb(37, 99, 235) !important;
    }
    
    .text-blue-500 {
      color: rgb(59, 130, 246) !important;
    }
    
    /* Green text colors for success states */
    .text-green-600 {
      color: rgb(22, 163, 74) !important;
    }
    
    .text-green-500 {
      color: rgb(34, 197, 94) !important;
    }
    
    /* Red text colors for error states */
    .text-red-600 {
      color: rgb(220, 38, 38) !important;
    }
    
    .text-red-500 {
      color: rgb(239, 68, 68) !important;
    }
  }
}